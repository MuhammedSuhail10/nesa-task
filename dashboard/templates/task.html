{% extends "base.html" %}
{% block content %}

<h3>Task</h3>

{% comment %} {% if request.user.role == 'admin' %} {% endcomment %}
<a href="{% url 'create_task' %}">Create Task</a>
{% comment %} {% endif %} {% endcomment %}

<table border="1" style="margin-top: 3em;">
    <tr style="padding: 1em;">
        <th style="padding: 1em;">Title</th>
        <th style="padding: 1em;">Description</th>
        <th style="padding: 1em;">Assigned To</th>
        <th style="padding: 1em;">Due Date</th>
        <th style="padding: 1em;">Status</th>
        {% if request.user.role == 'admin' %}
        <th style="padding: 1em;">Action</th>
        {% endif %}
    </tr>
    {% for task in tasks %}
    <tr>
        <td style="padding: 1em;">{{ task.title }}</td>
        <td style="padding: 1em;">{{ task.description }}</td>
        <td style="padding: 1em;">{{ task.assigned_to }}</td>
        <td style="padding: 1em;">{{ task.due_date }}</td>
        <td style="padding: 1em;">{{ task.status }}</td>
        {% if request.user.role == 'admin' %}
        <td style="padding: 1em;">
            <a href="{% url 'delete_task' task.id %}">Delete</a>
        </td>
        {% endif %}
    </tr>
    {% empty %}
    <tr>
        <td colspan="4" style="padding: 1em;">No task found</td>
    </tr>
    {% endfor %}
</table>

{% endblock content %}